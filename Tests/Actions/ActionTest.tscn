[gd_scene load_steps=25 format=4 uid="uid://bdryp1672xdf7"]

[ext_resource type="Script" uid="uid://dw6w3lvrh2ggp" path="res://Scripts/Start.gd" id="1_baond"]
[ext_resource type="PackedScene" uid="uid://b6c5d68ty35va" path="res://Templates/Entities/PlayerEntityTemplate-Overhead.tscn" id="2_020ow"]
[ext_resource type="TileSet" uid="uid://dinnvtrdv2ejn" path="res://Templates/TileSetTemplate.tres" id="2_c1c8v"]
[ext_resource type="PackedScene" uid="uid://d06m60dgdv8ui" path="res://Components/Data/StatsComponent.tscn" id="3_c1c8v"]
[ext_resource type="Script" uid="uid://dif3dj8k5ixfw" path="res://Resources/Stats/Stat.gd" id="4_tue7k"]
[ext_resource type="Resource" uid="uid://drkt6rhhny6b4" path="res://Tests/Stats/TestMana.tres" id="5_tl03x"]
[ext_resource type="Resource" uid="uid://hb6usrrdkrlu" path="res://Tests/Stats/TestAmmo.tres" id="6_ahkry"]
[ext_resource type="Resource" uid="uid://cu2cyw7oyn5ae" path="res://Tests/Stats/TestGold.tres" id="7_8gufy"]
[ext_resource type="PackedScene" uid="uid://sh78hf5wicm6" path="res://Components/Gameplay/ActionsComponent.tscn" id="8_fib85"]
[ext_resource type="Script" uid="uid://q0i03i1tgbx7" path="res://Resources/Actions/Action.gd" id="9_0lnki"]
[ext_resource type="Resource" uid="uid://hfn0hhrpo6ui" path="res://Tests/Actions/TestActionZoom.tres" id="10_faxyp"]
[ext_resource type="Resource" uid="uid://bryqvy7gb2xaj" path="res://Tests/Actions/TestActionLook.tres" id="11_suttq"]
[ext_resource type="PackedScene" uid="uid://dkejn1qlbxsa2" path="res://Components/Control/ActionControlComponent.tscn" id="12_jynvc"]
[ext_resource type="PackedScene" uid="uid://cw0tix585c5wr" path="res://Templates/Entities/SpriteEntityTemplate.tscn" id="13_020ow"]
[ext_resource type="PackedScene" uid="uid://c6sthnygmcwpg" path="res://Components/Gameplay/ActionTargetableComponent.tscn" id="14_1cwln"]
[ext_resource type="Script" uid="uid://etxev52wl7c8" path="res://UI/Lists/StatsList.gd" id="15_lia1s"]
[ext_resource type="PackedScene" uid="uid://bvld40na03sjv" path="res://Components/Gameplay/ActionReactionComponent.tscn" id="16_c1c8v"]
[ext_resource type="Script" uid="uid://ds0n1f1kv6lo6" path="res://UI/Lists/ActionButtonsList.gd" id="16_lbcpr"]
[ext_resource type="Script" uid="uid://bao8m0h48vee5" path="res://Tests/Actions/TestActionLookReaction.gd" id="17_tl03x"]
[ext_resource type="Script" uid="uid://dua4cd3nlawsb" path="res://Resources/Payloads/Payload.gd" id="17_tue7k"]
[ext_resource type="Script" uid="uid://cnho8p8evw7t0" path="res://Resources/Payloads/ScriptPayload.gd" id="18_ahkry"]
[ext_resource type="Script" uid="uid://domdl3gotja4j" path="res://Tests/Actions/TestActionFallbackReaction.gd" id="20_8gufy"]

[sub_resource type="Resource" id="Resource_8gufy"]
script = ExtResource("18_ahkry")
payloadScript = ExtResource("17_tl03x")
debugMode = true
metadata/_custom_type_script = "uid://cnho8p8evw7t0"

[sub_resource type="Resource" id="Resource_fib85"]
script = ExtResource("18_ahkry")
payloadScript = ExtResource("20_8gufy")
debugMode = true
metadata/_custom_type_script = "uid://cnho8p8evw7t0"

[node name="ActionsTest" type="Node2D"]
script = ExtResource("1_baond")
shouldPrintDebugLogs = true
showDebugLabels = true

[node name="TileMapLayer" type="TileMapLayer" parent="."]
tile_map_data = PackedByteArray("AAD1//X/AwAAAAAAAAD2//X/AwAAAAAAAAD3//X/AwAAAAAAAAD4//X/AwAAAAAAAAAGAPX/AwAAAAAAAAAHAPX/AwAAAAAAAAAIAPX/AwAAAAAAAAAJAPX/AwAAAAAAAAAKAPX/AwAAAAAAAAAKAAoAAwAAAAAAAAAJAAoAAwAAAAAAAAAIAAoAAwAAAAAAAAAHAAoAAwAAAAAAAAAGAAoAAwAAAAAAAAAFAAoAAwAAAAAAAAAEAAoAAwAAAAAAAAADAAoAAwAAAAAAAAACAAoAAwAAAAAAAAABAAoAAwAAAAAAAAAAAAoAAwAAAAAAAAD//woAAwAAAAAAAAD+/woAAwAAAAAAAAD9/woAAwAAAAAAAAD8/woAAwAAAAAAAAD7/woAAwAAAAAAAAD6/woAAwAAAAAAAAD5/woAAwAAAAAAAAD4/woAAwAAAAAAAAD3/woAAwAAAAAAAAD2/woAAwAAAAAAAAD1/woAAwAAAAAAAAD5//X/AwAAAAAAAAD6//X/AwAAAAAAAAD7//X/AwAAAAAAAAD8//X/AwAAAAAAAAD9//X/AwAAAAAAAAD+//X/AwAAAAAAAAD///X/AwAAAAAAAAAAAPX/AwAAAAAAAAABAPX/AwAAAAAAAAACAPX/AwAAAAAAAAADAPX/AwAAAAAAAAAEAPX/AwAAAAAAAAAFAPX/AwAAAAAAAAAKAAAAAwAAAAAAAAAKAAEAAwAAAAAAAAAKAAIAAwAAAAAAAAAKAAMAAwAAAAAAAAAKAAQAAwAAAAAAAAAKAAUAAwAAAAAAAAAKAAYAAwAAAAAAAAAKAAcAAwAAAAAAAAAKAAgAAwAAAAAAAAAKAAkAAwAAAAAAAAAKAP//AwAAAAAAAAAKAP7/AwAAAAAAAAAKAP3/AwAAAAAAAAAKAPz/AwAAAAAAAAAKAPv/AwAAAAAAAAAKAPr/AwAAAAAAAAAKAPn/AwAAAAAAAAAKAPj/AwAAAAAAAAAKAPf/AwAAAAAAAAAKAPb/AwAAAAAAAAD1/wEAAwAAAAAAAAD1/wIAAwAAAAAAAAD1/wMAAwAAAAAAAAD1/wQAAwAAAAAAAAD1/wAAAwAAAAAAAAD1////AwAAAAAAAAD1//7/AwAAAAAAAAD1//3/AwAAAAAAAAD1//z/AwAAAAAAAAD1//v/AwAAAAAAAAD1//r/AwAAAAAAAAD1//n/AwAAAAAAAAD1//j/AwAAAAAAAAD1//f/AwAAAAAAAAD1//b/AwAAAAAAAAD1/wUAAwAAAAAAAAD1/wYAAwAAAAAAAAD1/wcAAwAAAAAAAAD1/wgAAwAAAAAAAAD1/wkAAwAAAAAAAAA=")
tile_set = ExtResource("2_c1c8v")

[node name="PlayerEntityTemplate-Overhead" parent="." instance=ExtResource("2_020ow")]

[node name="StatsComponent" parent="PlayerEntityTemplate-Overhead" instance=ExtResource("3_c1c8v")]
stats = Array[ExtResource("4_tue7k")]([ExtResource("5_tl03x"), ExtResource("6_ahkry"), ExtResource("7_8gufy")])

[node name="ActionsComponent" parent="PlayerEntityTemplate-Overhead" instance=ExtResource("8_fib85")]
actions = Array[ExtResource("9_0lnki")]([ExtResource("10_faxyp"), ExtResource("11_suttq")])
debugMode = true

[node name="ActionControlComponent" parent="PlayerEntityTemplate-Overhead" instance=ExtResource("12_jynvc")]

[node name="SpriteEntity1" parent="." instance=ExtResource("13_020ow")]
position = Vector2(64, 64)

[node name="ActionTargetableComponent" parent="SpriteEntity1" instance=ExtResource("14_1cwln")]

[node name="SpriteEntity2" parent="." instance=ExtResource("13_020ow")]
position = Vector2(-64, -64)
region_rect = Rect2(608, 208, 16, 16)

[node name="ActionReactionComponent" parent="SpriteEntity2" instance=ExtResource("16_c1c8v")]
payloads = Dictionary[StringName, ExtResource("17_tue7k")]({
&"testLook": SubResource("Resource_8gufy")
})
fallbackPayload = SubResource("Resource_fib85")
debugMode = true

[node name="Label" type="Label" parent="SpriteEntity2"]
offset_left = -64.0
offset_top = -24.0
offset_right = 66.0
offset_bottom = -16.0
text = "Reacts to \"testLook\""
horizontal_alignment = 1
vertical_alignment = 1

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="MarginContainer" type="MarginContainer" parent="CanvasLayer"]
offset_right = 40.0
offset_bottom = 40.0
theme_override_constants/margin_top = 24

[node name="StatsList" type="GridContainer" parent="CanvasLayer/MarginContainer" node_paths=PackedStringArray("statsComponent")]
layout_mode = 2
script = ExtResource("15_lia1s")
statsComponent = NodePath("../../../PlayerEntityTemplate-Overhead/StatsComponent")

[node name="ActionsList" type="HBoxContainer" parent="CanvasLayer" node_paths=PackedStringArray("entity")]
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_top = -40.0
offset_right = 40.0
grow_vertical = 0
script = ExtResource("16_lbcpr")
entity = NodePath("../../PlayerEntityTemplate-Overhead")
debugMode = true
